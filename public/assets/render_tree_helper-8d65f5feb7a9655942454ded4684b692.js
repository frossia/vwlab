(function(){this._escape=function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},this._unescape=function(e){return e.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"')},this.render_tree=function(e,n){var t,r,l,o,d,a,i,p,g,c,h,s,u,f,_,v,b,x,m,q,y;if(null==n&&(n={}),d="",c={id:"id",node:null,root:!1,level:0,boost:[]},$.extend(c,n),0!==c.boost.length){for(t=[],s=0,v=e.length;v>s;s++)p=e[s],g=p.parent_id||0,a=t[g],a instanceof Array||(t[g]=[]),t[g].push(p);c.boost=t}if(c.node)for(r=[],l="",r=t[c.node.id],y=0,q=r.length;q>y;y++)p=r[y],$.extend(c,{node:p,root:!1,level:c.level+1}),l=render_tree(e,c),d+=c.render_node(p,l,c);else{if(h=c.boost[0],i=e[0],0===h.length&&0!==e.length){for(u=0,b=e.length;b>u;u++)o=e[u],o.parent_id<i.parent_id&&(i=o);for(f=0,x=e.length;x>f;f++)o=e[f],o.parent_id===i.parent_id&&h.push(o)}for(_=0,m=h.length;m>_;_++)p=h[_],$.extend(c,{node:p,root:!1,level:c.level+1}),l=render_tree(e,c),d+=c.render_node(p,l,c)}return d}}).call(this);